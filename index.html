<!DOCTYPE html>
<html>
  <body>
    <input type="text" id="question" placeholder="Enter your question">
    <button onclick="sendFunction()">Submit</button>
    <p id="answer"></p>
    <label id="answer-label"></label>
    <script>
      require('dotenv').config();
      const Replicate = require('replicate');
      const replicate = new Replicate(process.env.REPLICATE_API_TOKEN);
      async function sendFunction() {
        const question = document.getElementById("question").value;

        const input = {
          prompt: "A llama walks into a bar. " + question,
          temperature: 0.95,
          max_new_tokens: 500
        };

        const Replicate = await import('replicate');
        const replicate = new Replicate();

        for await (const event of replicate.stream("meta/llama-2-7b", { input })) {
          document.getElementById("answer").innerHTML = event;
        }
      }
    </script>
  </body>
</html>
